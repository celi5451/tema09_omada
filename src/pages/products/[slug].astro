---
import Mainlayout from "../../layouts/Mainlayout.astro";

export async function getStaticPaths() {
  const data = await fetch("https://plvxocuuxcvvcyxybbvf.supabase.co/rest/v1/Omada", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsdnhvY3V1eGN2dmN5eHliYnZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODE4MTgxOTgsImV4cCI6MTk5NzM5NDE5OH0.CfZdfZ4kMRMeiWvUYstoNXldegEeJg7bA3YyNycUh4A",
    },
  }).then((response) => response.json());

  return data.map((product) => {
    return {
      params: { slug: product.slug },
      props: { myData: product },
    };
  });
}
const { myData } = Astro.props;
console.log(myData);
const { title } = Astro.props;
---

<Mainlayout title={myData.title}>
  <h2>{myData.title}</h2>
  <p>{myData.description}</p>
  <p>{myData.price}</p>
  <img src={`img/${myData.image}`} alt="" />
</Mainlayout>
